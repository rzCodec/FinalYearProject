<!DOCTYPE html>
<html lang="en" >
<head >
    <%- include ../../Partials/AboveFold.ejs %>
</head >
<body >
<main >
    <div class="row" >
        <%- include ./partials/nav.ejs %>
        <div class="col s8" >
            <div class="valign-wrapper" >
                <h2 class="center-align" style='width:100%;' >Flagged Users</h2 >
            </div >
            <ul id="staggered-test" >
                <li class="" style="transform: translateX(0px); opacity: 0; " >
                </li >
                <li class="" style="transform: translateX(0px); opacity: 0; margin-top:100px;" >
                    <ul class="collection" >
                        <%
                        flaggedUsers.forEach(function (user) { %>
                        <li class="collection-item avatar" >
                            <img src="images/profilePics/<%= user.userThatGotReported %>.png" alt="" class="circle" >
                            <span class="title" >Username: <%= user.username  %></span >
                            <p >UserId that reported: <%= user.userThatReported %></p >
                            <p >Reason: <%= user.reason %></p >
                            <a class="waves-effect waves-light btn" onclick="pardonUser(<%= user.userThatGotReported %>);" ><i
                                        class="material-icons left" >cloud</i >Pardon</a >
                            <a class="waves-effect waves-light btn" onclick="banUser(<%= user.userThatGotReported %>);" ><i
                                        class="material-icons left" >cloud</i >Ban</a >
                        </li >
                        <% }) %>
                    </ul >
                </li >
            </ul >
        </div >

    </div >
</main >
<script >
  Materialize.showStaggeredList('#staggered-test');

  function banUser (id) {
    $.post("https://www.eternalvibes.me/banUser",
      {
        userId: id
      },
      function (data, status) {
        console.log("Data: " + data + "\nStatus: " + status);
      });
  }

  function pardonUser (id) {
    $.post("https://www.eternalvibes.me/pardonUser",
      {
        userId: id
      },
      function (data, status) {
        console.log("Data: " + data + "\nStatus: " + status);
      });
  }

  $(".button-collapse").sideNav();
  $('.carousel.carousel-slider').carousel({fullWidth: true});
  $(document).ready(function () {
    $(".carousel-fixed-item").on('click', '.btn', function () {
      $('.carousel').carousel('next');
      Materialize.toast('Judged!', 2000, 'rounded')
    });
  });

</script >

</body >
</html >
