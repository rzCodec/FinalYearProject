<!DOCTYPE html>
<html lang="en" >
<head >
    <%- include ../../Partials/AboveFold.ejs %>
</head >
<body >
<main >
    <div class="row" >
        <%- include ./partials/nav.ejs %>
        <div class="col s8" >
            <div class="valign-wrapper" >
                <h2 class="center-align" style='width:100%;' >Reports</h2 >
            </div >
            <ul id="staggered-test" >

                <li class="" style="transform: translateX(0px); opacity: 0; " >
                    <div class='container' >
                        <div class="card white darken-4 black-text" >
                            <div class="card-content" >
                                <h1 >Genre percentages</h1 >
                                <canvas id="myChart" width="400" height="400" ></canvas >
                            </div >
                        </div >
                    </div >
                </li >
                <li class="" style="transform: translateX(0px); opacity: 0; " >
                    <div class='container' >
                        <div class="card white darken-4 black-text" >
                            <div class="card-content" >
                                <h1 >Signups per week</h1 >
                                <canvas id="myChartSignup" width="400" height="400" ></canvas >
                            </div >
                        </div >
                    </div >
                </li >
                <li class="" style="transform: translateX(0px); opacity: 0; " >
                    <div class='container' >
                        <div class="card white darken-4 black-text" >
                            <div class="card-content" >
                                <h1 >Skill Percentages</h1 >
                                <canvas id="myChartSkills" width="400" height="400" ></canvas >
                            </div >
                        </div >
                    </div >
                </li >
                <li class="" style="transform: translateX(0px); opacity: 0; " >
                    <div class='container' >
                        <div class="card white darken-4 black-text" >
                            <div class="card-content" >
                                <h1 >Daily # of Signups</h1 >
                                <br >
                                <%= Reports.users24.count %>
                            </div >
                        </div >
                    </div >
                </li >
                <li class="" style="transform: translateX(0px); opacity: 0; " >
                    <div class='container' >
                        <div class="card white darken-4 black-text" >
                            <div class="card-content" >
                                <h1 >Daily # of Events created</h1 >
                                <br >
                                <%= Reports.events24.count %>
                            </div >
                        </div >
                    </div >
                </li >
                <li class="" style="transform: translateX(0px); opacity: 0; " >
                    <div class='container' >
                        <div class="card white darken-4 black-text" >
                            <div class="card-content" >
                                <h1 >Daily # of Logins</h1 >
                                <br >
                                <%= Reports.usersLogin24.count %>
                            </div >
                        </div >
                    </div >
                </li >
            </ul >
        </div >
    </div >
</main >
<script >
  var ctx = document.getElementById("myChart").getContext('2d');
  var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: [<% Reports.genres.forEach(function (genre) { %>
        "<%= genre.name %>",
          <% }) %>],
      datasets: [{
        label: '# of users',
        data: [<% Reports.genres.forEach(function (genre) { %>
            <%= genre.count %>,
            <% }) %>],
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        yAxes: [{
          ticks: {
            beginAtZero: true
          }
        }]
      }
    }
  });

  var ctx2 = document.getElementById("myChartSignup").getContext('2d');
  var myChart2 = new Chart(ctx2, {
    type: 'bar',
    data: {
      labels: [
        "Week4","Week3","Week2","Week1"
      ],
      datasets: [{
        label: '# of users per week',
        data: [<%=Reports.usersWeek4%>,<%=Reports.usersWeek3%>,<%=Reports.usersWeek2%>,<%=Reports.usersWeek1%>],
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        yAxes: [{
          ticks: {
            beginAtZero: true
          }
        }]
      }
    }
  });

  var ctx3 = document.getElementById("myChartSkills").getContext('2d');
  var myChart3 = new Chart(ctx3, {
    type: 'bar',
    data: {
      labels: [<% Reports.usersSkills.forEach(function (skill) { %>
        "<%= skill.name %>",
          <% }) %>],
      datasets: [{
        label: '# of users',
        data: [<% Reports.usersSkills.forEach(function (skill) { %>
            <%= skill.count %>,
            <% }) %>],
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        yAxes: [{
          ticks: {
            beginAtZero: true
          }
        }]
      }
    }
  });
</script >
<script >
  Materialize.showStaggeredList('#staggered-test');
  $(".button-collapse").sideNav();

</script >

</body >
</html >
